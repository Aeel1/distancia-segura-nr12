<!DOCTYPE html>
<html lang="pt-br">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Distância Segura Alto Risco - NR-12</title>
  <link rel="stylesheet" href="style.css">
</head>
<body>

  <header>
  <a href="index.html" class="btn-voltar" title="Voltar">←</a>
  <img src="logo_nr12.png" class="logo" alt="Logo">
  <h1>Distância Segura • NR-12</h1>
</header>

  <main>
    <section class="card">
      <h2>Barreiras Mecânicas de Proteção</h2>
      <h4 style="color:#c0392b; margin:15px 0;">Tabela de altura e distância horizontal de proteção para <strong>ALTO RISCO</strong></h4>

      <label for="hPerigo">Altura do perigo (mm):</label>
      <input type="number" id="hPerigo" placeholder="Digite qualquer valor (ex: 850)" min="0">

      <label for="hEstrutura">Altura da estrutura de proteção (mm):</label>
      <select id="hEstrutura">
        <option value="" disabled selected>Selecione</option>
        <option value="1000">1000 mm</option>
        <option value="1200">1200 mm</option>
        <option value="1400">1400 mm</option>
        <option value="1600">1600 mm</option>
        <option value="1800">1800 mm</option>
        <option value="2000">2000 mm</option>
        <option value="2200">2200 mm</option>
        <option value="2400">2400 mm</option>
        <option value="2500">2500 mm</option>
        <option value="2700">2700 mm</option>
      </select>

      <button id="btnCalcular">Calcular</button>

      <div id="resultado" class="resultado"></div>
    </section>
  </main>

  <footer>
    <p>Projeto Distância Segura • NR-12 • Alto Risco</p>
  </footer>

  <script>
    // TABELA OFICIAL ALTO RISCO – ISO 13857 Tabela 5 (valores em mm)
    const tabelaAltoRisco = {
      0:    {1000:1100,1200: 500,1400:   0,1600:   0,1800:   0,2000:   0,2200:   0,2400:   0,2500:   0,2700:   0},
      200:  {1000:1200,1200: 900,1400:   0,1600:   0,1800:   0,2000:   0,2200:   0,2400:   0,2500:   0,2700:   0},
      400:  {1000:1400,1200:1200,1400: 400,1600:   0,1800:   0,2000:   0,2200:   0,2400:   0,2500:   0,2700:   0},
      600:  {1000:1400,1200:1300,1400: 800,1600:   0,1800:   0,2000:   0,2200:   0,2400:   0,2500:   0,2700:   0},
      800:  {1000:1500,1200:1300,1400: 900,1600: 600,1800:   0,2000:   0,2200:   0,2400:   0,2500:   0,2700:   0},
      1000: {1000:1500,1200:1400,1400:1000,1600: 800,1800:   0,2000:   0,2200:   0,2400:   0,2500:   0,2700:   0},
      1200: {1000:1500,1200:1400,1400:1100,1600: 900,1800: 700,2000:   0,2200:   0,2400:   0,2500:   0,2700:   0},
      1400: {1000:1500,1200:1400,1400:1100,1600: 900,1800: 800,2000:   0,2200:   0,2400:   0,2500:   0,2700:   0},
      1600: {1000:1500,1200:1400,1400:1100,1600: 900,1800: 800,2000: 500,2200:   0,2400:   0,2500:   0,2700:   0},
      1800: {1000:1500,1200:1400,1400:1100,1600: 900,1800: 800,2000: 600,2200:   0,2400:   0,2500:   0,2700:   0},
      2000: {1000:1400,1200:1300,1400:1100,1600: 900,1800: 800,2000: 600,2200: 400,2400:   0,2500:   0,2700:   0},
      2200: {1000:1300,1200:1200,1400:1000,1600: 900,1800: 800,2000: 600,2200: 400,2400: 300,2500:   0,2700:   0},
      2400: {1000:1100,1200:1000,1400: 900,1600: 800,1800: 700,2000: 600,2200: 400,2400: 300,2500: 100,2700:   0},
      2600: {1000: 900,1200: 800,1400: 700,1600: 600,1800: 600,2000: 500,2200: 400,2400: 300,2500: 100,2700:   0},
      2700: {1000:   0,1200:   0,1400:   0,1600:   0,1800:   0,2000:   0,2200:   0,2400:   0,2500:   0,2700:   0}
    };

    const alturasTabela = [0,200,400,600,800,1000,1200,1400,1600,1800,2000,2200,2400,2600,2700];

    function encontrarValorSuperior(valor) {
      for (const h of alturasTabela) if (valor <= h) return h;
      return 2700;
    }

    function calcularAltoRisco(hPerigoRef, hProtecao) {
      return tabelaAltoRisco[hPerigoRef][hProtecao] ?? 0;
    }

    document.getElementById("btnCalcular").addEventListener("click", () => {
      const valorDigitado = parseFloat(document.getElementById("hPerigo").value);
      const hEstrutura = document.getElementById("hEstrutura").value;
      const box = document.getElementById("resultado");

      if (isNaN(valorDigitado) || valorDigitado < 0 || !hEstrutura) {
        box.innerHTML = "<strong style='color:#c00;'>Preencha todos os campos corretamente!</strong>";
        box.style.display = "block";
        return;
      }

      const hPerigoRef = encontrarValorSuperior(valorDigitado);
      const distancia = calcularAltoRisco(hPerigoRef, hEstrutura);

      let msg = "";
      if (valorDigitado !== hPerigoRef) {
        msg += `<small style="color:#e67e22;">(Referência conservadora: ${hPerigoRef} mm)</small><br>`;
      }

      if (distancia === 0) {
        msg += "<strong style='color:#27ae60; font-size:22px;'>PROTEGIDO!</strong><br>Não é necessária distância horizontal.<br>A proteção já impede o alcance do perigo.";
      } else {
        msg += `<strong style="font-size:24px; color:#c0392b;">Distância Horizontal Mínima:<br>${distancia} mm</strong>`;
      }

      box.innerHTML = msg;
      box.style.display = "block";
      box.style.padding = "20px";
      box.style.backgroundColor = distancia === 0 ? "#d5f5e3" : "#fadbd8";
    });
  </script>
</body>
</html>